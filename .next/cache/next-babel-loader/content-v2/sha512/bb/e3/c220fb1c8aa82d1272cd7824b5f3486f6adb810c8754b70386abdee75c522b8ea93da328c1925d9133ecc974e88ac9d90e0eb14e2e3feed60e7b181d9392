{"ast":null,"code":"import _regeneratorRuntime from \"F:/github/nextjs/chalenge-wiser-react-ts/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"F:/github/nextjs/chalenge-wiser-react-ts/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport api from '../../services/api';\nimport { signin } from '../ducks/account';\nimport { addMessage } from '../ducks/layout';\nexport var authLogin = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(user) {\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            return _context.abrupt(\"return\", function (dispatch) {\n              api.post('/account/signin', user).then(function (res) {\n                localStorage.setItem('wiser-token', res.data.token);\n                dispatch(signin()); //router.push('dashboard');\n              })[\"catch\"](function (error) {\n                var message = error.response.data.message;\n                dispatch(addMessage());\n              });\n            });\n\n          case 1:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function authLogin(_x) {\n    return _ref.apply(this, arguments);\n  };\n}();","map":{"version":3,"sources":["F:/github/nextjs/chalenge-wiser-react-ts/src/store/fetchActions/accountActions.ts"],"names":["api","signin","addMessage","authLogin","user","dispatch","post","then","res","localStorage","setItem","data","token","error","message","response"],"mappings":";;AAAA,OAAOA,GAAP,MAAgB,oBAAhB;AACA,SAASC,MAAT,QAAuB,kBAAvB;AACA,SAASC,UAAT,QAA2B,iBAA3B;AAGA,OAAO,IAAMC,SAAS;AAAA,sEAAG,iBAAOC,IAAP;AAAA;AAAA;AAAA;AAAA;AAAA,6CAGjB,UAACC,QAAD,EAAe;AACpBL,cAAAA,GAAG,CACFM,IADD,CACM,iBADN,EACyBF,IADzB,EAECG,IAFD,CAEM,UAACC,GAAD,EAAS;AACdC,gBAAAA,YAAY,CAACC,OAAb,CAAqB,aAArB,EAAoCF,GAAG,CAACG,IAAJ,CAASC,KAA7C;AACAP,gBAAAA,QAAQ,CAACJ,MAAM,EAAP,CAAR,CAFc,CAId;AACA,eAPD,WAQO,UAACY,KAAD,EAAW;AAAA,oBACTC,OADS,GACGD,KAAK,CAACE,QAAN,CAAeJ,IADlB,CACTG,OADS;AAEjBT,gBAAAA,QAAQ,CAACH,UAAU,EAAX,CAAR;AACA,eAXD;AAYD,aAhBuB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAATC,SAAS;AAAA;AAAA;AAAA,GAAf","sourcesContent":["import api from '../../services/api';\r\nimport { signin } from '../ducks/account';\r\nimport { addMessage } from '../ducks/layout';\r\nimport { useRouter } from 'next/router'\r\n\r\nexport const authLogin = async (user) => {\r\n\t//const router = useRouter()\r\n\r\n\treturn (dispatch)  => {\r\n\t\t api\r\n\t\t\t.post('/account/signin', user)\r\n\t\t\t.then((res) => {\r\n\t\t\t\tlocalStorage.setItem('wiser-token', res.data.token);\r\n\t\t\t\tdispatch(signin());\r\n\r\n\t\t\t\t//router.push('dashboard');\r\n\t\t\t})\r\n\t\t\t.catch((error) => {\r\n\t\t\t\tconst { message } = error.response.data;\r\n\t\t\t\tdispatch(addMessage());\r\n\t\t\t});\r\n\t};\r\n};"]},"metadata":{},"sourceType":"module"}